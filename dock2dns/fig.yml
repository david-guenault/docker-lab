# vim: tabstop=4 shiftwidth=4 expandtab
dock2dns:
    image: dguenault/dock2dns:latest
    name: dock2dns
    hostname: dock2dns
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf
        - /var/run/docker.sock:/docker.sock
    command: --domain=dock2dns.lan --etcd=http://172.17.42.1:4001 --socket=unix://docker.sock

etcd:  
    image: dguenault/etcd:0.4.6
    name: etcd
    hostname: etcd
    links:
        - dock2dns:dock2dns
    ports:
        - "172.17.42.1:4001:4001"
    volumes: 
        - /etc/localtime:/etc/localtime:ro
    command: -addr 172.17.42.1:4001 -name etcd

skydns:
    image: dguenault/skydns:latest
    name: skydns
    hostname: skydns
    links:
        - etcd:etcd
    environment:
        - ETCD_MACHINES=172.17.42.1:4001
    ports:
        - 172.17.42.1:53:53/udp
    command: -nameservers=8.8.8.8:53 -domain=dock2dns.lan -addr=0.0.0.0:53 -verbose 
    volumes:
        - /etc/localtime:/etc/localtime:ro

