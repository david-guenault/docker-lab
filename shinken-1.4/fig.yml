# vim: tabstop=4 shiftwidth=4 expandtab

# full shinken 1.4.4 setup (1 daemon = 1 container ) 
# config is mounted as a volume so that it can be edited by hand outside the docker container
# depend on the following projects :
#  - mongo
#  - dock2dns

arbiter1:
    image: dguenault/shinken-arbiter:1.4.4
    hostname: arbiter1
    links:
        - poller1
        - poller2
        - poller3
        - poller4
        - poller5
        - poller6
        - scheduler1
        - scheduler2
        - broker1
        - broker2
        - reactionner1
        - reactionner2
        - receiver1
        - receiver2
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf
        - shinken-specific.cfg:/etc/shinken/shinken-specific.cfg
        - hosts-shinken.cfg:/etc/shinken/hosts/hosts-shinken.cfg
        - checkmyws-plugins/shinken/pack-checkmyws/pack:/etc/shinken/packs/checkmyws

arbiter2:
    image: dguenault/shinken-arbiter:1.4.4
    hostname: arbiter2
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf
        - shinken-specific.cfg:/etc/shinken/shinken-specific.cfg
        - hosts-shinken.cfg:/etc/shinken/hosts/hosts-shinken.cfg
        - checkmyws-plugins/shinken/pack-checkmyws/pack:/etc/shinken/packs/checkmyws
    links:
        - arbiter1
        - poller1
        - poller2
        - poller3
        - poller4
        - poller5
        - poller6
        - scheduler1
        - scheduler2
        - broker1
        - broker2
        - reactionner1
        - reactionner2
        - receiver1
        - receiver2

poller1:
    image: dguenault/shinken-poller:1.4.4
    hostname: poller1
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

poller2:
    image: dguenault/shinken-poller:1.4.4
    hostname: poller2
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

poller3:
    image: dguenault/shinken-poller:1.4.4
    hostname: poller3
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

poller4:
    image: dguenault/shinken-poller:1.4.4
    hostname: poller4
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

poller5:
    image: dguenault/shinken-poller:1.4.4
    hostname: poller5
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

poller6:
    image: dguenault/shinken-poller:1.4.4
    hostname: poller6
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

receiver1:
    image: dguenault/shinken-receiver:1.4.4
    hostname: receiver1
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

receiver2:
    image: dguenault/shinken-receiver:1.4.4
    hostname: receiver2
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf
    links:
        - receiver1

reactionner1:
    image: dguenault/shinken-reactionner:1.4.4
    hostname: reactionner1
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

reactionner2:
    image: dguenault/shinken-reactionner:1.4.4
    hostname: reactionner2
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf
    links:
        - reactionner1

broker1:
    image: dguenault/shinken-broker:1.4.4
    hostname: broker1
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

broker2:
    image: dguenault/shinken-broker:1.4.4
    hostname: broker2
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf
    links:
        - broker1

scheduler1:
    image: dguenault/shinken-scheduler:1.4.4
    hostname: scheduler1
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf

scheduler2:
    image: dguenault/shinken-scheduler:1.4.4
    hostname: scheduler2
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - resolv.conf:/etc/resolv.conf
    links:
        - scheduler1

